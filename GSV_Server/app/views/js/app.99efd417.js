(function(){"use strict";var e={2339:function(e,n,t){t.d(n,{h:function(){return me}});var o=t(9242),r=t(8142),a=t(3396);function s(e,n,t,o,r,s){const i=(0,a.up)("router-view");return(0,a.wg)(),(0,a.j4)(i)}var i={name:"App"},l=t(89);const c=(0,l.Z)(i,[["render",s]]);var d=c,u=t(2483);const p={class:"user"};function g(e,n,t,o,r,s){const i=(0,a.up)("Map"),l=(0,a.up)("LocationInput");return(0,a.wg)(),(0,a.iD)("div",p,[(0,a.Wm)(i,{latLng:r.latLng,user:!0},null,8,["latLng"]),(0,a.Wm)(l,{onLocationChanged:s.locationChanged,onMarkerPressed:e.markerPressed,onSizeChangedPressed:e.sizeChangedPressed},null,8,["onLocationChanged","onMarkerPressed","onSizeChangedPressed"])])}var m=t(7139);const h={class:"ui two column centered grid",style:{position:"relative","z-index":"10"}},f={class:"column"},v={class:"ui segment large form",style:{background:"#1b1b1ec2"}},k={class:"field"};function w(e,n,t,r,s,i){const l=(0,a.up)("GMapAutocomplete");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("section",h,[(0,a._)("div",f,[(0,a.wy)((0,a._)("div",{class:"ui message red"},(0,m.zw)(s.error),513),[[o.F8,s.error]]),(0,a._)("div",v,[(0,a._)("div",k,[(0,a._)("div",{class:(0,m.C_)(["ui right icon input large",{loading:s.spinner}])},[(0,a.Wm)(l,{placeholder:"This is a placeholder",onPlace_changed:i.setPlace},null,8,["onPlace_changed"]),(0,a._)("i",{class:"dot circle link icon",onClick:n[0]||(n[0]=(...e)=>i.locatorButtonPressed&&i.locatorButtonPressed(...e))})],2)])])])])])}var b=t(6265),M=t.n(b),L={data(){return{address:"",error:"",spinner:!1}},methods:{setPlace(e){this.$emit("location-changed",e.geometry.location.lat(),e.geometry.location.lng())},locatorButtonPressed(){this.spinner=!0,navigator.geolocation?navigator.geolocation.getCurrentPosition((e=>{this.getAddressFrom(e.coords.latitude,e.coords.longitude),this.$emit("location-changed",e.coords.latitude,e.coords.longitude)}),(e=>{this.error="Locator is unable to find your address. Please type your address manually.",this.spinner=!1,console.log(e.message)})):(this.error=error.message,this.spinner=!1,console.log("Your browser does not support geolocation API "))},getAddressFrom(e,n){M().get("https://maps.googleapis.com/maps/api/geocode/json?latlng="+e+","+n+"&key="+me.state.apiKey).then((e=>{e.data.error_message?(this.error=e.data.error_message,console.log(e.data.error_message)):this.address=e.data.results[0].formatted_address,this.spinner=!1})).catch((e=>{this.error=e.message,this.spinner=!1,console.log(e.message)}))}},emits:["location-changed","marker-pressed","sizeChanged-pressed"]};const y=(0,l.Z)(L,[["render",w],["__scopeId","data-v-6649a892"]]);var C=y;const _={id:"map_wrapper"};function P(e,n,t,o,r,s){const i=(0,a.up)("GMapMarker"),l=(0,a.up)("GMapMap"),c=(0,a.up)("StreetView");return(0,a.wg)(),(0,a.iD)("div",_,[(0,a._)("section",{style:(0,m.j5)(s.mapStyle),id:"map-container",ref:"map"},[(0,a.Wm)(l,{ref:"mapRef",center:t.latLng,zoom:t.user?16:20,"map-type-id":"terrain",onClick:s.addMarker},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.markers,((e,n)=>((0,a.wg)(),(0,a.j4)(i,{key:n,position:e.position,clickable:!0,draggable:!0,onClick:n=>s.clickThat(e),onDragend:n=>e.position=n.latLng},null,8,["position","onClick","onDragend"])))),128))])),_:1},8,["center","zoom","onClick"])],4),(0,a._)("section",{style:(0,m.j5)(s.panoStyle),id:"pano-container"},[r.isLoaded?((0,a.wg)(),(0,a.j4)(c,{key:0,onMarkerChanged:s.markerChangedEvent,latLng:t.latLng,map:r.mapRef,markers:r.markers},null,8,["onMarkerChanged","latLng","map","markers"])):(0,a.kq)("",!0)],4)])}const S={id:"pano",ref:"pano"};function O(e,n,t,o,r,s){const i=(0,a.up)("MarkerContainer");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("section",S,null,512),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.renderedMarkers,(e=>((0,a.wg)(),(0,a.j4)(i,{key:e.id,node:e},null,8,["node"])))),128))],64)}function A(e,n,t,o,r,s){return(0,a.wg)(),(0,a.iD)("section")}function j(e,n,t,o,r,s){const i=(0,a.up)("Camera"),l=(0,a.up)("AmbientLight"),c=(0,a.up)("FbxModel"),d=(0,a.up)("Scene"),u=(0,a.up)("Renderer");return(0,a.wg)(),(0,a.j4)(u,{ref:"renderer",antialias:"","orbit-ctrl":{enableDamping:!0,target:r.target},resize:"",shadow:"",alpha:""},{default:(0,a.w5)((()=>[(0,a.Wm)(i,{position:{x:10,y:200,z:200}}),(0,a.Wm)(d,{ref:"scene"},{default:(0,a.w5)((()=>[(0,a.Wm)(l),(0,a.Wm)(c,{src:"Samba Dancing.fbx",onLoad:s.onLoad},null,8,["onLoad"])])),_:1},512)])),_:1},8,["orbit-ctrl"])}var x=t(9096),T=t(9186),D={name:"FPXExample-Component",components:{AmbientLight:T.Mi,Camera:T.V1,FbxModel:T.QI,Renderer:T.Th},data(){return{target:new x.Pa4(0,100,0),renderer:null}},mounted(){this.renderer=this.$refs.renderer},unmounted(){console.log("THREE OVERLAY UNMOUNT"),this.renderer.renderer.forceContextLoss(),this.renderer=null},methods:{onLoad(e){this.mixer=new x.Xcj(e);const n=this.mixer.clipAction(e.animations[0]);n.play(),e.traverse((function(e){e.isMesh&&(e.castShadow=!0,e.receiveShadow=!0)})),this.clock=new x.SUY,this.$refs.renderer.onBeforeRender(this.updateMixer)},updateMixer(){this.mixer.update(this.clock.getDelta())}}};const I=(0,l.Z)(D,[["render",j]]);var z=I,E={name:"MarkerContainer",props:{node:Object},data(){return{threeOverlayInstance:null,comp:null}},mounted(){this.threeOverlayInstance=(0,a.aZ)({extends:z}),this.comp=(0,T.ri)(this.threeOverlayInstance),this.comp.mount(this.node)},beforeUnmount(){this.comp.unmount(),this.comp=null,this.threeOverlayInstance=null}};const R=(0,l.Z)(E,[["render",A]]);var Z=R;let $=!1;var V={name:"StreetView",components:{MarkerContainer:Z},props:{map:Object,latLng:Object,markers:[Object]},emits:["marker-changed"],data(){return{pano:null,gMapsMarkers:[],renderedMarkers:[]}},mounted(){this.pano=new google.maps.StreetViewPanorama(this.$refs["pano"],{position:{lat:this.latLng.lat,lng:this.latLng.lng},pov:{heading:0,pitch:0},addressControlOptions:{position:google.maps.ControlPosition.LEFT_BOTTOM},linksControl:!0,panControl:!0,enableCloseButton:!1,motionTracking:!1,scrollwheel:!1,zoomControl:!1,showRoadLabels:!1,addressControl:!1}),this.map.$mapPromise.then((e=>{e.setStreetView(this.pano),this.pano.addListener("position_changed",(()=>{const n=this.pano.getPosition();e.setCenter(n),this.startMutationObserving()}))}))},methods:{checkAllMarkers(){let e='[src*="woodie_3.png"]';const n=document.querySelectorAll(e);Array.from(n).forEach((e=>{const n=e.getAttribute("src").split("#");if(console.log("ADD THREE JS LAYER",n[1]),1==e.parentNode.childElementCount){const n=document.createElement("div"),t=e.parentNode;t.append(n),this.renderedMarkers.push(n)}}))},hideAllMarker(){for(let e=0;e<this.gMapsMarkers.length;e++)this.gMapsMarkers[e].setPosition(null),this.gMapsMarkers[e].setMap(null);this.gMapsMarkers=[]},startMutationObserving(){const e=document.querySelectorAll('[aria-roledescription="map"]');if(!$){console.log("TARGET"),console.log(e);const n=new MutationObserver((e=>{console.log("observation test"),console.log(e);for(const n of e)("attributes"==n.type||"childList"==n.type)&&this.checkAllMarkers()}));n.observe(e[1],{attributes:!0,attributeFilter:["src"],childList:!0,subtree:!0}),$=!0}}},watch:{latLng:{handler:function(e){this.pano.setPosition(e)},deep:!0},markers:{handler:function(){this.renderedMarkers=[],this.hideAllMarker();for(let e=0;e<this.markers.length;e++){const n=new google.maps.MarkerImage("woodie_3.png",new google.maps.Size(300,200),new google.maps.Point(0,0),new google.maps.Point(48,32));n.url+="#"+e;const t=new google.maps.Marker({position:this.markers[e].position,map:this.pano,draggable:!1,icon:n});google.maps.event.addListener(t,"dragend",(()=>{const e=t.icon.url.split("#")[1],n=t.position;this.$emit("marker-changed",n,e)})),this.gMapsMarkers.push(t)}},deep:!0}}};const W=(0,l.Z)(V,[["render",O],["__scopeId","data-v-a98223d4"]]);var F=W,Y={name:"Map-Component",components:{StreetView:F},props:{latLng:Object,user:Boolean},computed:{mapStyle(){return{width:this.user?"15%":"50%"}},panoStyle(){return{width:this.user?"85%":"50%"}}},data(){return{markers:[{position:{lat:-33.8985415,lng:151.169633}}],mapRef:null,isLoaded:!1}},mounted(){this.$refs.mapRef.$mapPromise.then((e=>{this.isLoaded=!0,this.mapRef=this.$refs.mapRef,e.addListener("center_changed",(()=>{}))}))},methods:{addMarker(e){const n={lat:e.latLng.lat(),lng:e.latLng.lng()};this.markers.push({position:n})},clickThat:function(e){console.log(e)},markerChangedEvent(e,n){this.markers[n].position=e}}};const q=(0,l.Z)(Y,[["render",P]]);var B=q,U={name:"User-View",data(){return{latLng:{lat:-33.8985415,lng:151.169633}}},components:{Map:B,LocationInput:C},methods:{locationChanged(e,n){console.log("Location Changed:",e,n),this.latLng.lat=e,this.latLng.lng=n}}};const H=(0,l.Z)(U,[["render",g]]);var K=H;const G={class:"moderator"};function N(e,n,t,o,r,s){const i=(0,a.up)("Map"),l=(0,a.up)("LocationInput");return(0,a.wg)(),(0,a.iD)("div",G,[(0,a.Wm)(i,{latLng:r.latLng,user:!1},null,8,["latLng"]),(0,a.Wm)(l,{onLocationChanged:s.locationChanged,onMarkerPressed:e.markerPressed,onSizeChangedPressed:e.sizeChangedPressed},null,8,["onLocationChanged","onMarkerPressed","onSizeChangedPressed"])])}var X={name:"Moderator-View",data(){return{latLng:{lat:-33.8985415,lng:151.169633}}},components:{Map:B,LocationInput:C},methods:{locationChanged(e,n){console.log("Location Changed:",e,n),this.latLng.lat=e,this.latLng.lng=n}}};const J=(0,l.Z)(X,[["render",N]]);var Q=J;const ee={class:"ui middle aligned center aligned grid"},ne={class:"column",style:{width:"30%"}},te={class:"ui large form"},oe={class:"ui stacked segment"},re={class:"field"};function ae(e,n,t,r,s,i){return(0,a.wg)(),(0,a.iD)("div",ee,[(0,a._)("div",ne,[(0,a._)("form",te,[(0,a._)("div",oe,[(0,a._)("div",re,[(0,a.wy)((0,a._)("input",{type:"text",placeholder:"Your API key","onUpdate:modelValue":n[0]||(n[0]=e=>s.api_input=e)},null,512),[[o.nr,s.api_input]])]),(0,a._)("button",{class:"ui fluid large red submit button",onClick:n[1]||(n[1]=(...e)=>i.valueSubmitted&&i.valueSubmitted(...e))},"Connect")])])])])}var se={name:"Landing-View",data(){return{api_input:""}},methods:{valueSubmitted:function(){console.log(this.api_input),console.log(this.$route.query.redirect),me.commit("login",this.api_input),this.$router.replace(this.$route.query.redirect||"/")}}};const ie=(0,l.Z)(se,[["render",ae]]);var le=ie;const ce=[{path:"/",name:"Home",component:K},{path:"/user",name:"User",component:K,meta:{requiresAuth:!0}},{path:"/moderator",name:"Moderator",component:Q,meta:{requiresAuth:!0}},{path:"/login",name:"Login",component:le}],de=(0,u.p7)({history:(0,u.PO)("/app/"),base:"/app/",routes:ce});var ue=de,pe=t(65),ge=t(2415);const me=new pe.ZP.Store({plugins:[(0,ge.Z)({storage:window.sessionStorage})],state:{isLoggedIn:!1,apiKey:String},mutations:{setGlobalError(e,n){e.globalError=n},login(e,n){e.isLoggedIn=!0,e.apiKey=n}}}),he=(0,o.ri)(d);he.use(ue).use(me).use(r.ZP,{load:{key:me.state.apiKey,libraries:["places"]}}).mount("#app")}},n={};function t(o){var r=n[o];if(void 0!==r)return r.exports;var a=n[o]={exports:{}};return e[o](a,a.exports,t),a.exports}t.m=e,function(){var e=[];t.O=function(n,o,r,a){if(!o){var s=1/0;for(d=0;d<e.length;d++){o=e[d][0],r=e[d][1],a=e[d][2];for(var i=!0,l=0;l<o.length;l++)(!1&a||s>=a)&&Object.keys(t.O).every((function(e){return t.O[e](o[l])}))?o.splice(l--,1):(i=!1,a<s&&(s=a));if(i){e.splice(d--,1);var c=r();void 0!==c&&(n=c)}}return n}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[o,r,a]}}(),function(){t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,{a:n}),n}}(),function(){t.d=function(e,n){for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};t.O.j=function(n){return 0===e[n]};var n=function(n,o){var r,a,s=o[0],i=o[1],l=o[2],c=0;if(s.some((function(n){return 0!==e[n]}))){for(r in i)t.o(i,r)&&(t.m[r]=i[r]);if(l)var d=l(t)}for(n&&n(o);c<s.length;c++)a=s[c],t.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return t.O(d)},o=self["webpackChunkgmaps_vue"]=self["webpackChunkgmaps_vue"]||[];o.forEach(n.bind(null,0)),o.push=n.bind(null,o.push.bind(o))}();var o=t.O(void 0,[998],(function(){return t(2339)}));o=t.O(o)})();
//# sourceMappingURL=app.99efd417.js.map